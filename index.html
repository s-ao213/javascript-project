<!DOCTYPE html> 
<html lang="ja"> 
    <head> 
        <meta charset="UTF-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>ミニゲーム作成</title> 
        <link rel="stylesheet" href="main.css"> 
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p&family=Noto+Serif+JP:wght@200..900&display=swap" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-tomorrow.min.css" rel="stylesheet">
        <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    </head> 

    <header>
        <a class="pagetop" href="#top"><div class="pagetop__arrow"></div></a>
        <input type="checkbox" id="overlay-input">
        <label for="overlay-input" id="overlay-button">
            <span></span>
        </label>
        <div id="overlay">
            <ul>
                <u><strong style="font-size: 120%;"><li><a href="#1st" class="menu-item">目次</a></li></strong></u>
                <u><strong><li><a href="#2nd" class="menu-item">javascriptの基礎知識</a></li></strong></u>
                <li><a href="#1-1" class="menu-item">変数宣言</a></li>
                <li><a href="#1-2" class="menu-item">データ型</a></li>
                <li><a href="#1-3" class="menu-item">制御構文</a></li>
                <li><a href="#1-4" class="menu-item">関数宣言</a></li>

                <u><strong><li><a href="#3rd" class="menu-item">ゲームの作り方</a></li></strong></u>
                <li><a href="#2-1" class="menu-item">ファイルの作成</a></li>
                <li><a href="#2-2" class="menu-item">画像の保存</a></li>
                <li><a href="#2-3" class="menu-item">HTML&CSSファイルの設定</a></li>
                <li><a href="#2-4" class="menu-item">変数の設定</a></li>
                <li><a href="#2-5" class="menu-item">関数の設定</a></li>
                <li><a href="#2-6" class="menu-item">実行処理</a></li>

            </ul>
        </div>
    </header>
    <body> 
        <h1 id="top">javascriptを使ったミニゲーム製作体験</h1>

        <section>
            <h2>目次</h2>
            <ul>
                <li><a href="#1st">どんなゲームを作るか</a></li>
                <li><a href="#2nd">javascriptの基礎知識</a></li>
                <li><a href="#3rd">ゲームの作り方</a></li>
            </ul>
        </section>
        
        <section>
            <h2 id="1st">どんなゲームを作るか</h2>
            <p>
                今回作成するのは、簡単な迷路を使ったタイムトライアルゲームです。下記のソースコード・デモページにあるようなゲームを作成します。
                <ul>
                    <li><a href="https://s-ao213.github.io/javascript-project/game/index.html">作成したいゲームのデモページ</a></li>
                    <li><a href="https://github.com/s-ao213/javascript-project/tree/2677af2255f665ff4910a98caf581e0999eb3512/game">ソースコード</a></li>
                </ul>
            </p>
            <div class="point">
                <br>
                <strong style="font-size: 120%;">このゲームを作成すると身につく知識</strong>
                <ul>
                    <li>変数宣言について（let、const）</li>
                    <li>データ型について（数値、文字列、配列、オブジェクト、日付、ブール値）</li>
                    <li>演算子と制御構文について（if文、forループ）</li>
                </ul>
                <br>
            </div>
        </section>
        
        <section>
            <h2 id="2nd">JavaScriptの基礎知識</h2>
            <p>
                JavaScriptはウェブ開発で広く使われるプログラミング言語です。ここでは、JavaScriptの基本的な構文と概念について説明します。
            </p>
        
            <h3 id="1-1">変数宣言</h3>
            <p>
                JavaScriptでは、変数を宣言する方法として<code>var</code>、<code>let</code>、<code>const</code>があります。<code>let</code>と<code>const</code>は<code>var</code>よりも新しい方法であり、ブロックスコープを持つため、より安全に使えます。ブロックスコープとは、中括弧 <code>{}</code>で囲まれたブロック内でのみ有効な変数のスコープを指します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code1')">コピー</button>
                </div>
                <pre><code id="code1" class="language-javascript">// varの例
var x = 10;
console.log(x); // 10

// letの例
let y = 20;
console.log(y); // 20

// constの例
const z = 30;
console.log(z); // 30</code>
                </pre>
            </div>

        
            <h3 id="1-2">データ型</h3>
            <p>
                JavaScriptには以下のような基本的なデータ型があります。
            </p>
            <ul>
                <li>文字列型（String）</li>
                <li>数値型（Number）</li>
                <li>ブール型（Boolean）</li>
                <li>特殊型（Undefined, Null）</li>
                <li>シンボル型（Symbol）</li>
                <li>オブジェクト型（Object, Array, Function）</li>
            </ul>
            
            <h4>文字列型（String）</h4>
            <p>テキストデータを表すためのデータ型です。文字列はダブルクォート " またはシングルクォート ' で囲まれます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code2')">コピー</button>
                </div>
                <pre><code id="code2" class="language-javascript">let text = "Hello, World!";</code>
                </pre>
            </div>
            
            <h4>数値型（Number）</h4>
            <p>整数および浮動小数点数を表すためのデータ型です。JavaScriptでは整数と浮動小数点数は同じ数値型として扱われます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code3')">コピー</button>
                </div>
                <pre><code id="code3" class="language-javascript">let number = 42;
let decimal = 3.14;</code>
                </pre>
            </div>
            
            <h4>ブール型（Boolean）</h4>
            <p>真（true）または偽（false）の2つの値を持つデータ型です。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code4')">コピー</button>
                </div>
                <pre><code id="code4" class="language-javascript">let isTrue = true;
let isFalse = false;</code>
                </pre>
            </div>
            
            <h4>特殊型（Undefined, Null）</h4>
            <p>Undefined は変数が定義されていないことを示し、Null は変数に何も値が設定されていないことを示します。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code5')">コピー</button>
                </div>
                <pre><code id="code5" class="language-javascript">let undefinedValue;
let nullValue = null;</code>
                </pre>
            </div>
            
            <h4>シンボル型（Symbol）</h4>
            <p>一意の識別子を表すデータ型です。主にオブジェクトのプロパティキーとして使用されます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code6')">コピー</button>
                </div>
                <pre><code id="code6" class="language-javascript">let symbol = Symbol('description');</code>
                </pre>
            </div>
            
            <h4>オブジェクト型（Object, Array, Function）</h4>
            <p>複雑なデータ構造を表すためのデータ型です。オブジェクト、配列、関数が含まれます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code7')">コピー</button>
                </div>
                <pre><code id="code7" class="language-javascript">let obj = { name: "Alice", age: 25 };
let array = [1, 2, 3, 4, 5];
let func = function() { console.log("Hello!"); };</code>
                </pre>
            </div>
        
            <h3 id="1-2">演算子</h3>
            <p>
                JavaScriptでは、算術演算子や比較演算子、論理演算子などが使われます。
            </p>
            <ul>
                <li>算術演算子： <code>+</code>（加算）、<code>-</code>（減算）、<code>*</code>（乗算）、<code>/</code>（除算）、<code>%</code>（剰余）</li>
                <li>比較演算子： <code>==</code>（等価）、<code>===</code>（厳密等価）、<code>!=</code>（不等価）、<code>!==</code>（厳密不等価）、<code>&gt;</code>（より大きい）、<code>&lt;</code>（より小さい）、<code>&gt;=</code>（以上）、<code>&lt;=</code>（以下）</li>
                <li>論理演算子： <code>&&</code>（論理積、AND）、<code>||</code>（論理和、OR）、<code>!</code>（論理否定、NOT）</li>
            </ul>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code8')">コピー</button>
                </div>
                <pre><code id="code8" class="language-javascript">// 算術演算子
let sum = 10 + 5; // 15
let difference = 10 - 5; // 5
let product = 10 * 5; // 50
let quotient = 10 / 5; // 2
let remainder = 10 % 3; // 1 (10を3で割った余り)

// 比較演算子
let isEqual = (10 == 10); // true
let isStrictEqual = (10 === "10"); // false (型が異なるため)
let isNotEqual = (10 != 5); // true
let isGreaterThan = (10 &gt; 5); // true
let isLessThanEqual = (10 &lt;= 10); // true

// 論理演算子
let logicalAnd = (true && false); // false
let logicalOr = (true || false); // true
let logicalNot = !true; // false</code>
                </pre>
            </div>
        
            <h3 id="1-3">制御構文</h3>
            <p>
                JavaScriptでは、コードの実行を制御するために、条件分岐やループが使用されます。
            </p>
        
            <h4>条件分岐（if文）</h4>
            <p>
                条件分岐（if文）は、特定の条件が真（true）であるかどうかを確認し、条件に応じて異なるコードブロックを実行します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code9')">コピー</button>
                </div>
                <pre><code id="code9" class="language-javascript">if (条件式) {
    // 条件が真の場合に実行されるコード
} else if (別の条件式) {
    // 別の条件が真の場合に実行されるコード
} else {
    // どの条件も満たさない場合に実行されるデフォルトのコード
}</code>
</pre>
            </div>

            
            <h4>ループ（forループ）</h4>
            <p>
                forループは特定の条件の間、コードブロックを繰り返し実行します。主に配列やオブジェクトの要素やプロパティに対して使用されます。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code10')">コピー</button>
                </div>
                <pre><code id="code10" class="language-javascript">// 標準的なforループ
for (初期化式; 条件式; 更新式) {
    // 条件式が真の間、繰り返し実行されるコード
}

// for...ofループ（配列の各要素に対して使用）
for (要素 of 配列) {
    // 配列の各要素に対して繰り返し実行されるコード
}

// for...inループ（オブジェクトのプロパティに対して使用）
for (プロパティ in オブジェクト) {
    // オブジェクトのプロパティごとに繰り返し実行されるコード
}</code>
            </pre>
            </div>
        
            <h3 id="1-4">関数宣言</h3>
        <p>
            JavaScriptでは、以下のように異なる方法で関数を定義することができます。それぞれの方法には特有の特徴があります。
        </p>
        
        <!-- 宣言関数の説明 -->
        <h4> 宣言関数（Function Declaration）</h4>
        <p>
            宣言関数は、<code>function</code> キーワードを使って定義します。関数名を指定し、その関数が必要とする引数を丸括弧の中に書きます。関数が実行されたときに行う処理は波括弧の中に書きます。
        </p>
        <div class="code-container">
            <div class="code-header">
                <span>javascript</span>
                <button class="copy-button" onclick="copyCode('code11')">コピー</button>
            </div>
            <pre><code id="code11" class="language-javascript">function 関数名(引数1, 引数2, ...) { // 関数が実行されたときに行う処理 } </code>
            </pre>
        </div>
        <pre><code>
</code></pre>
        
        
        <!-- 関数式の説明 -->
        <h4>関数式（Function Expression）</h4>
        <p>
            関数式は、関数を変数に代入する形式で定義します。関数名は省略することもできます。関数が実行されたときに行う処理は波括弧の中に書きます。
        </p>
        <div class="code-container">
            <div class="code-header">
                <span>javascript</span>
                <button class="copy-button" onclick="copyCode('code12')">コピー</button>
            </div>
            <pre><code id="code12" class="language-javascript">
                const 変数名 = function(引数1, 引数2, ...) { // 関数が実行されたときに行う処理 };</code>
            </pre>
        </div>
        
        <!-- アロー関数の説明 -->
        <h4>アロー関数（Arrow Function）</h4>
        <p>
            アロー関数は、関数をより簡潔に定義するための方法です。<code>=></code> を使って関数を定義します。引数が1つの場合は丸括弧を省略できます。関数が実行されたときに行う処理は波括弧の中に書きます。
        </p>
        <div class="code-container">
            <div class="code-header">
                <span>javascript</span>
                <button class="copy-button" onclick="copyCode('code13')">コピー</button>
            </div>
            <pre><code id="code13" class="language-javascript">
            const 変数名 = (引数1, 引数2, ...) =&gt; { // 関数が実行されたときに行う処理 };</code>
            </pre>
        </div>

        </section>
        <section>
            <h2 id="3rd">ゲームの作り方</h2>
            <h3 id="2-1">ファイルの作成</h3>
            <p>
                今回はHTML、CSS、javascriptを使用するので3つのファイルを作成します。ファイル名はバグ防止のため同じものにしてください。
                <br>
                <u>
                    <li>HTML用ファイル：index.html</li>
                    <li>javascript用ファイル：game.js</li>
                    <li>CSS用ファイル：style.css</li>
                </u>
            </p>
            
            <h3 id="2-2">画像の保存</h3>
            <p>
                次にゲームで使用する画像を保存してきます。このゲームで使用するのは4人分のキャラクターと3人分の荷物のイラストです。今回イラストは<a href="https://hpgpixer.jp/#google_vignette">ピクセルガロー</a>様でお借りしました。
                <ul>
                    <li>プレイヤーのキャラクター(左右1枚ずつ)：<b>player-left.gif、player-right.gif</b></li>
                        <li>配達先のキャラクターA：<b>syatyou.gif</b></li>
                        <li>配達先のキャラクターB：<b>syokunin.gif</b></li>
                        <li>配達先のキャラクターC：<b>ryourinin.gif</b></li>
                        <li>配達物A：<b>syatyou1.png</b></li>
                        <li>配達物B：<b>syokunin1.png</b></li>
                        <li>配達物C：<b>ryourinin1.png</b></li>
                </ul>
                <span style="color: red;">これらの画像は<a href="#1st" style="color: red;">このページの冒頭</a>のソースコードのページからダウンロード出来ます。</span>
            </p>
            <h3 id="2-3"> HTML&CSSファイルの設定</h3>
            <p>これらのファイルを用意出来たら、index.htmlとstyle.cssにそれぞれ下記のコードを貼り付けます。今回はjavascriptの勉強が目的ですので、ここではHTML、CSSについての解説はしていません。気になる人は各自調べてみてください。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>index.html</span>
                    <button class="copy-button" onclick="copyCode('code14')">コピー</button>
                </div>
                <pre><code id="code14" class="language-javascript">
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;迷路ゲーム&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
&lt;/head&gt;
&lt;body&gt;        
    &lt;div class="explain"&gt;
        &lt;h1&gt;迷路ゲーム&lt;/h1&gt;
        &lt;h2&gt;ルール説明&lt;/h2&gt;
        &lt;p&gt;左上のキャラクターを使って、なるべく早く迷路内の落し物持ち主に届けて、1番左上のマスに戻ってくるタイムを競うゲームである。&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;荷物は一度に一つしか持てません。&lt;/li&gt;
            &lt;li&gt;黄色い場所が地面で緑の場所が壁（障害物）です。&lt;/li&gt;
            &lt;li&gt;荷物を渡すときは、正しい持ち主の周りのマスを踏むと渡せるようになっています。&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div id="container"&gt;
        &lt;div id="maze-container"&gt;&lt;/div&gt;
        &lt;div id="log-container"&gt;ここにはゲームのログが表示されるよ！&lt;/div&gt;
    &lt;/div&gt;

    &lt;script src="game.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;                    
                    </code>
                </pre>
            </div>
            
            <br>
            
            <div class="code-container">
                <div class="code-header">
                    <span>style.css</span>
                    <button class="copy-button" onclick="copyCode('code15')">コピー</button>
                </div>
                <pre><code id="code15" class="language-javascript">
body {
    display: flex;
    flex-direction: column;
    padding-left: 5%;
}

.explain{
    padding-right: 45%;
}

#maze-container {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(20, 30px);
    grid-template-rows: repeat(11, 30px);
    gap: 2px;
}

.cell {
    width: 30px;
    height: 30px;
    border: 1px solid #ddd;
    display: flex;
    align-items: center;
    justify-content: center;
    background-size: cover;
    background-position: center;
}

#container {
    display: flex;
}

.player {
    background-color: #0f0;
    background-image: url('player.gif');
}

.player-left {
    background-image: url('player-left.gif');
}

.player-right {
    background-image: url('player-right.gif');
}

.customer {
    background-color: #00f;
}

.package {
    background-color: #f00;
}

.wall {
    background-color: #006036;
}

.path {
    background-color: #D0A900;
}

@import url('https://fonts.googleapis.com/css2?family=DotGothic16&display=swap');

#log-container {
    flex: 1;
    margin-top: 20px;
    margin-left: 20px;
    border: 5px solid rgb(0, 117, 226);
    padding: 10px;
    width: 300px;
    height: 250px;
    overflow-y: auto;
    background-color: #000;
    color: #ddd;
    font-family: "DotGothic16", sans-serif;
    font-weight: 400;
    font-style: normal;
}
        </code>
                </pre>
            </div>
            <br>

            <h3 id="2-4">変数の設定</h3>

            <h4>maze</h4>
            <p>
                2次元配列で、迷路の構造を定義しています。0は通路、1は壁を表します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code16')">コピー</button>
                </div>
                <pre><code id="code16" class="language-javascript">const maze = [
            [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1],
            [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1],
            [0, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 1],
            [0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
            [0, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1],
            [1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1],
            [1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1],
            [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1],
            [1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1],
            [0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            [1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1]
            ];</code></pre>
            </div>
            <br>

            <h4>mazeContainer</h4>
            <p>
                HTMLの迷路を表示するための要素を保持する変数です。
            </p>
            <div class="words">
                <strong>「要素を保持する」</strong> とは、簡単に説明するとウェブページ上での場所取りです。HTMLのコード内で表示する場所を確保しておくことで、JavaScriptからその部分を操作したり、内容を変更したりすることが可能になります。もう少し具体的に説明すると、HTMLの要素はウェブページ上の構造を定義するために使用されます。これにより、<strong><span style="color: #B22222"> JavaScriptは特定のHTML要素を操作して、内容を動的に変更したり、スタイルを変更したり、イベントを処理したりすることが可能</span> </strong>になります。
            </div>
            <br>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code17')">コピー</button>
                </div>
                <pre><code id="code17" class="language-javascript">const mazeContainer = document.getElementById('maze-container');</code></pre>
            </div>
            <br>
            

            <h4>logContainer</h4>
            <p>
                ゲームのログメッセージを表示するための要素を保持する変数です。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code18')">コピー</button>
                </div>
                <pre><code id="code18" class="language-javascript">const logContainer = document.getElementById('log-container');</code></pre>
            </div>
            <br>

            <h4>player</h4>
            <p>
                プレイヤーの現在位置を保持するオブジェクトです。初期位置は迷路の左上に設定されています。
            </p>
            <div class="words">
                <strong>オブジェクト</strong>とは、<span style="color: #B22222">複数の関連するデータを一つにまとめたものです。</span><code>player</code>はプレイヤーの位置を示すオブジェクトで、<span style="color: #B22222">X座標とY座標を含んでいます。</span>
            </div>
            <br>

            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code19')">コピー</button>
                </div>
                <pre><code id="code19" class="language-javascript">let player = { x: 1, y: 1 };</code></pre>
            </div>
            <br>

            <h4>customers</h4>
            <p>
                配達先の顧客の位置と名前、画像を保持する配列です。
            </p>
            <div class="words">
                <strong>配列</strong>とは、<span style="color: #B22222;">複数のデータを順序付けて保持するためのデータ構造です。</span><code>customers</code>は顧客の位置、名前、画像を含むオブジェクトの配列です。<span style="color: #B22222;">各オブジェクトは、</span><code>{ x: x座標, y: y座標, name: "役職", img: '画像の名前' }</code><span style="color: #B22222;">の形式です。</span>
            </div>
            <br>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code20')">コピー</button>
                </div>
                <pre><code id="code20" class="language-javascript">const customers = [
                { x: 19, y: 0, name: '社長', img: 'syatyou.gif' },
                { x: 0, y: 10, name: '職人', img: 'syokunin.gif' },
                { x: 19, y: 10, name: '料理人', img: 'ryourinin.gif' }
            ];</code></pre>
            </div>
            <br>

            <h4>packages</h4>
            <p>
                配達する荷物の位置と名前、画像を保持する配列です。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code21')">コピー</button>
                </div>
                <pre><code id="code21" class="language-javascript">let packages = [
                { x: 5, y: 5, name: '社長', img: 'syatyou1.png' },
                { x: 10, y: 5, name: '職人', img: 'syokunin1.png' },
                { x: 15, y: 5, name: '料理人', img: 'ryourinin1.png' }
            ];</code></pre>
            </div>
            <br>

            <h4>currentPackage</h4>
            <p>
                プレイヤーが現在運んでいる荷物を保持する変数です。荷物を拾ったときに設定されます。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code22')">コピー</button>
                </div>
                <pre><code id="code22" class="language-javascript">let currentPackage = null;</code></pre>
            </div>
            <br>

            <h4>startTime</h4>
            <p>
                ゲームの開始時間を保持する変数です。最初のキーが押されたときに設定されます。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code23')">コピー</button>
                </div>
                <pre><code id="code23" class="language-javascript">let startTime = null;</code></pre>
            </div>
            <br>

            <h4>deliveredPackages</h4>
            <p>
                プレイヤーが配達した荷物の数をカウントする変数です。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code24')">コピー</button>
                </div>
                <pre><code id="code24" class="language-javascript">let deliveredPackages = 0;</code></pre>
            </div>
            <br>

            <h4>playerDirection</h4>
            <p>
                プレイヤーの現在の移動方向を保持する変数です。初期値は'left'です。移動時にキャラクターの向きを変更するために使います。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code25')">コピー</button>
                </div>
                <pre><code id="code25" class="language-javascript">let playerDirection = 'left';</code></pre>
            </div>
            <br>

            <h4>startPosition</h4>
            <p>
                ゲームのスタート地点を保持するオブジェクトです。<code>startPosition</code>オブジェクトには、迷路内の水平方向の位置を示す<code>x</code> と、垂直方向の位置を示す<code>y</code> の2つのプロパティがあります。初期値は（x = 0, y = 0）です。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code26')">コピー</button>
                </div>
                <pre><code id="code26" class="language-javascript">const startPosition = { x: 0, y: 0 };</code></pre>
            </div>
            <br>

            <h3 id="2-5">関数の設定</h3>

            <h4>createMaze</h4>
            <p>
                迷路を生成する関数です。迷路の各マスをHTML要素として作成し、<code>mazeContainer</code>に追加します。迷路のマスは、通路（path）または壁（wall）としてクラスが設定されます。このクラスにより、CSSでスタイルでスタイルを設定できるようになります。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code27')">コピー</button>
                </div>
                <pre><code id="code27" class="language-javascript">function createMaze() {
                for (let y = 0; y &lt; maze.length; y++) {
                    for (let x = 0; x &lt; maze[y].length; x++) {
                        const cell = document.createElement('div');
                        cell.classList.add('cell');
                        if (maze[y][x] === 1) {
                            cell.classList.add('wall');
                        } else {
                            cell.classList.add('path');
                        }
                        mazeContainer.appendChild(cell);
                    }
                }
            }</code></pre>
            </div>
            <br>
            
            <h4>placePlayer</h4>
            <p>
                プレイヤーの位置に対応するマスに初期アイコンを表示させる関数です。プレイヤーの初期位置に対応するHTML要素に<code>player</code>クラスを設定し、CSSでプレイヤーの初期アイコンを表示します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code28')">コピー</button>
                </div>
                <pre><code id="code28" class="language-javascript">function placePlayer() {
                const playerCell = getCell(player.x, player.y);
                playerCell.classList.add('player');
            }</code></pre>
            </div>
            <br>
            
            <h4>placeCustomers</h4>
            <p>
                顧客の位置に対応するマスに画像を表示させる関数です。各顧客の位置に対応するHTML要素に<code>customer</code>クラスを追加し、<code>style.backgroundImage</code>プロパティで顧客の画像を設定します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code29')">コピー</button>
                </div>
                <pre><code id="code29" class="language-javascript">function placeCustomers() {
                customers.forEach(customer =&gt; {
                    const customerCell = getCell(customer.x, customer.y);
                    customerCell.classList.add('customer');
                    customerCell.style.backgroundImage = `url(${customer.img})`;
                });
            }</code></pre>
            </div>
            <br>
            
            <h4>placePackages</h4>
            <p>
                荷物の位置に対応するマスに画像を設定する関数です。各荷物の位置に対応するHTML要素に<code>package</code>クラスを追加し、<code>style.backgroundImage</code>プロパティで荷物の画像を設定します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code30')">コピー</button>
                </div>
                <pre><code id="code30" class="language-javascript">function placePackages() {
                packages.forEach(pkg =&gt; {
                    if (pkg) { // nullでない場合にのみ表示
                        const packageCell = getCell(pkg.x, pkg.y);
                        packageCell.classList.add('package');
                        packageCell.style.backgroundImage = `url(${pkg.img})`;
                    }
                });
            }</code></pre>
            </div>
            <br>
            
            <h4>getCell</h4>
            <p>
                この関数は、迷路の特定の位置にある座標（<code>x</code>と<code>y</code>）を使って、その位置に対応するマスを取得するものです。迷路はグリッド（格子）状になっていてHTMLの &lt; div &gt;タグを使って表現されています。<code>mazeContainer</code>の中にあるこれらの&lt;div&gt;タグを<strong>「子要素」</strong>と呼びます。これはプレイヤーが移動したときに、プレイヤーの表示を更新するときに使います。
                <div class="words">
                    <strong>子要素</strong>とは <span style="color: #B22222;">HTMLの中である要素（親要素）の中に含まれている別の要素のこと</span> です。ここでは、<code>mazeContainer</code>が親要素で、その中にある個々のマス（&lt;div&gt;タグ）が子要素です。
                </div>
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code31')">コピー</button>
                </div>
                <pre><code id="code31" class="language-javascript">function getCell(x, y) {
                return mazeContainer.children[y * 20 + x];
            }</code></pre>
            </div>
            <br>
            
            
            <h4>logMessage</h4>
                <p>
                    ログメッセージを表示する関数です。<code>div</code>要素を作成してメッセージを設定し、<code>logContainer</code>に追加します。最後に、<code>scrollTop</code>プロパティでスクロール位置を更新します。
                </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code32')">コピー</button>
                </div>
                <pre><code id="code32" class="language-javascript">function logMessage(message) {
                const logEntry = document.createElement('div');
                logEntry.textContent = message;
                logContainer.appendChild(logEntry);
                logContainer.scrollTop = logContainer.scrollHeight;
            }</code></pre>
            </div>
            <br>
            
            <h4>handleKeyPress</h4>
            <p>
                キー入力に応じてプレイヤーを移動させる関数です。移動先の座標が通路であれば、プレイヤーを移動させ、荷物や顧客とのインタラクションをチェックします。
                <div class="words">
                    <strong>インタラクション</strong>とは、プレイヤーが荷物を拾ったり顧客に渡したりすることです。
                </div>
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code33')">コピー</button>
                </div>
                <pre><code id="code33" class="language-javascript">function handleKeyPress(event) {
                if (!startTime) {
                    startTime = new Date();
                }
            
                const { key } = event;
                let newX = player.x;
                let newY = player.y;
                let direction = playerDirection;
            
                if (key === 'ArrowUp') {
                    newY--;
                }
                if (key === 'ArrowDown') {
                    newY++;
                }
                if (key === 'ArrowLeft') {
                    newX--;
                    direction = 'left';
                }
                if (key === 'ArrowRight') {
                    newX++;
                    direction = 'right';
                }
            
                if (newX &gt;= 0 && newX &lt; 20 && newY &gt;= 0 && newY &lt; 11 && maze[newY][newX] === 0) {
                    movePlayer(newX, newY, direction);
                    checkForPackage();
                    checkForCustomer();
                    checkForCompletion();
                }
            }</code></pre>
            </div>
            <br>
            
            <h4>movePlayer</h4>
            <p>
                プレイヤーの位置と方向を更新する関数です。現在のプレイヤーの位置から<code>player</code>クラスと方向クラスを削除し、新しい位置にプレイヤーのクラスを追加します。そして、<code>playerDirection</code>を更新してプレイヤーのアイコンを更新しアイコンの向きを変えます。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code34')">コピー</button>
                </div>
                <pre><code id="code34" class="language-javascript">function movePlayer(newX, newY, direction) {
                getCell(player.x, player.y).classList.remove('player', `player-${playerDirection}`);
                player.x = newX;
                player.y = newY;
                playerDirection = direction;
                placePlayer();
                updatePlayerIcon();
            }</code></pre>
            </div>
            <br>
            
            <h4>checkForPackage</h4>
            <p>
                プレイヤーが荷物を拾ったかどうかをチェックする関数です。荷物を拾った場合、その荷物をリストから削除し、対応するマスから荷物のクラス<code>package</code>を削除します。これにより迷路上からアイコンが消え、荷物を拾ったことがわかるようにログメッセージを更新します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code35')">コピー</button>
                </div>
                <pre><code id="code35" class="language-javascript">function checkForPackage() {
                packages.forEach((pkg, index) =&gt; {
                    if (pkg && pkg.x === player.x && pkg.y === player.y) {
                        packages[index] = null;
                        getCell(pkg.x, pkg.y).classList.remove('package');
                        logMessage('荷物を拾いました。');
                    }
                });
            }</code></pre>
            </div>
            <br>
            
            <h4>checkForCustomer</h4>
            <p>
                プレイヤーが顧客に荷物を届けたかどうかをチェックする関数です。顧客に荷物を届けた場合、対応するマスから顧客のクラスを削除し、ログメッセージを更新します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code36')">コピー</button>
                </div>
                <pre><code id="code36" class="language-javascript">function checkForCustomer() {
                customers.forEach((customer, index) =&gt; {
                    if (customer.x === player.x && customer.y === player.y) {
                        getCell(customer.x, customer.y).classList.remove('customer');
                        logMessage('荷物を届けました。');
                    }
                });
            }</code></pre>
            </div>
            <br>
            
            <h4>checkForCompletion</h4>
            <p>
                ゲームの完了条件をチェックする関数です。全ての荷物が配達されたかどうかを確認し、完了していればログメッセージを表示します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code37')">コピー</button>
                </div>
                <pre><code id="code37" class="language-javascript">function checkForCompletion() {
                const allPackagesDelivered = packages.every(pkg =&gt; pkg === null);
                if (allPackagesDelivered) {
                    const endTime = new Date();
                    const timeTaken = (endTime - startTime) / 1000;
                    logMessage(`ゲームクリア！所要時間: ${timeTaken}秒`);
                }
            }</code></pre>
            </div>
            <br>
            
            <h4>updatePlayerIcon</h4>
            <p>
                プレイヤーのアイコンが向いている方向を管理する関数です。プレイヤーの方向に応じたクラスを追加し管理ます。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code38')">コピー</button>
                </div>
                <pre><code id="code38" class="language-javascript">function updatePlayerIcon() {
                const playerCell = getCell(player.x, player.y);
                playerCell.classList.add(`player-${playerDirection}`);
            }</code></pre>
            </div>
            <br>
            
            

            <h3 id="2-6">実行処理</h3>
            <p>
                ここまで変数や関数を定義してきましたが、定義するだけではプログラムは動きません。JavaScriptはコードを上から順に実行するため、あらかじめ必要なものを定義した後に実行処理を記述しなければなりません。多くの変数や関数を設定しましたが、関数の中で別の関数を実行している場合もありすべてを個別に実行する必要はないです。それも含めて実行コードはこのような形になります。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>game.js</span>
                    <button class="copy-button" onclick="copyCode('code39')">コピー</button>
                </div>
                <pre><code id="code39" class="language-javascript">
            // キー押下時にプレイヤーを移動させる
            document.addEventListener('keydown', handleKeyPress);
            
            // 迷路を生成する
            createMaze();
            
            // プレイヤーを初期位置に配置する
            placePlayer();
            
            // 顧客を迷路内に配置する
            placeCustomers();
            
            // 荷物を迷路内に配置する
            placePackages();
                </code></pre>
            </div>
            
            <br>
            <!-- <div class="code-container">
                <div class="code-header">
                    <span>言語</span>
                    <button class="copy-button" onclick="copyCode('code')">コピー</button>
                </div>
                <pre><code id="code" class="language-javascript">

                    </code>
                </pre>
            </div> -->
        </section>
        <script src="script.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-javascript.min.js"></script>
    </body> 
</html>