<!DOCTYPE html> 
<html lang="ja"> 
    <head> 
        <meta charset="UTF-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>ミニゲーム作成</title> 
        <link rel="stylesheet" href="main.css"> 
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p&family=Noto+Serif+JP:wght@200..900&display=swap" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-tomorrow.min.css" rel="stylesheet">
        <link href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" rel="stylesheet">
    </head> 
    
    <body> 
        <h1>javascriptを使ったミニゲーム製作体験</h1>

        <section>
            <h2>目次</h2>
            <ul>
                <li><a href="#1st">どんなゲームを作るか</a></li>
                <li><a href="#2nd">javascriptの基礎知識</a></li>
                <li><a href="#3rd">ゲームの作り方</a></li>
            </ul>
        </section>
        
        <section>
            <h2 id="1st">どんなゲームを作るか</h2>
            <p>
                今回作成するのは、簡単な迷路を使ったタイムトライアルゲームです。具体的には下記のデモページにあるようなゲームを作成します。
                <br>
                <a href="">作成したいゲームのデモページ</a>
                <br>
            </p>
            <div class="point">
                <br>
                <strong style="font-size: 120%;">このゲームを作成すると身につく知識</strong>
                <ul>
                    <li>変数宣言について（let、const）</li>
                    <li>データ型について（数値、文字列、配列、オブジェクト、日付、ブール値）</li>
                    <li>演算子と制御構文について（if文、forループ）</li>
                </ul>
                <br>
            </div>
        </section>
        
        <section>
            <h2 id="2nd">JavaScriptの基礎知識</h2>
            <p>
                JavaScriptはウェブ開発で広く使われるプログラミング言語です。ここでは、JavaScriptの基本的な構文と概念について説明します。
            </p>
        
            <h3>変数宣言</h3>
            <p>
                JavaScriptでは、変数を宣言する方法として<code>var</code>、<code>let</code>、<code>const</code>があります。<code>let</code>と<code>const</code>は<code>var</code>よりも新しい方法であり、ブロックスコープを持つため、より安全に使えます。ブロックスコープとは、中括弧 <code>{}</code>で囲まれたブロック内でのみ有効な変数のスコープを指します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code1')">コピー</button>
                </div>
                <pre><code id="code1" class="language-javascript">// varの例
var x = 10;
console.log(x); // 10

// letの例
let y = 20;
console.log(y); // 20

// constの例
const z = 30;
console.log(z); // 30</code>
                </pre>
            </div>

        
            <h3>データ型</h3>
            <p>
                JavaScriptには以下のような基本的なデータ型があります。
            </p>
            <ul>
                <li>文字列型（String）</li>
                <li>数値型（Number）</li>
                <li>ブール型（Boolean）</li>
                <li>特殊型（Undefined, Null）</li>
                <li>シンボル型（Symbol）</li>
                <li>オブジェクト型（Object, Array, Function）</li>
            </ul>
            
            <h4>文字列型（String）</h4>
            <p>テキストデータを表すためのデータ型です。文字列はダブルクォート " またはシングルクォート ' で囲まれます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code2')">コピー</button>
                </div>
                <pre><code id="code2" class="language-javascript">let text = "Hello, World!";</code>
                </pre>
            </div>
            
            <h4>数値型（Number）</h4>
            <p>整数および浮動小数点数を表すためのデータ型です。JavaScriptでは整数と浮動小数点数は同じ数値型として扱われます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code3')">コピー</button>
                </div>
                <pre><code id="code3" class="language-javascript">let number = 42;
let decimal = 3.14;</code>
                </pre>
            </div>
            
            <h4>ブール型（Boolean）</h4>
            <p>真（true）または偽（false）の2つの値を持つデータ型です。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code4')">コピー</button>
                </div>
                <pre><code id="code4" class="language-javascript">let isTrue = true;
let isFalse = false;</code>
                </pre>
            </div>
            
            <h4>特殊型（Undefined, Null）</h4>
            <p>Undefined は変数が定義されていないことを示し、Null は変数に何も値が設定されていないことを示します。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code5')">コピー</button>
                </div>
                <pre><code id="code5" class="language-javascript">let undefinedValue;
let nullValue = null;</code>
                </pre>
            </div>
            
            <h4>シンボル型（Symbol）</h4>
            <p>一意の識別子を表すデータ型です。主にオブジェクトのプロパティキーとして使用されます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code6')">コピー</button>
                </div>
                <pre><code id="code6" class="language-javascript">let symbol = Symbol('description');</code>
                </pre>
            </div>
            
            <h4>オブジェクト型（Object, Array, Function）</h4>
            <p>複雑なデータ構造を表すためのデータ型です。オブジェクト、配列、関数が含まれます。</p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code7')">コピー</button>
                </div>
                <pre><code id="code7" class="language-javascript">let obj = { name: "Alice", age: 25 };
let array = [1, 2, 3, 4, 5];
let func = function() { console.log("Hello!"); };</code>
                </pre>
            </div>
        
            <h3>演算子</h3>
            <p>
                JavaScriptでは、算術演算子や比較演算子、論理演算子などが使われます。
            </p>
            <ul>
                <li>算術演算子： <code>+</code>（加算）、<code>-</code>（減算）、<code>*</code>（乗算）、<code>/</code>（除算）、<code>%</code>（剰余）</li>
                <li>比較演算子： <code>==</code>（等価）、<code>===</code>（厳密等価）、<code>!=</code>（不等価）、<code>!==</code>（厳密不等価）、<code>&gt;</code>（より大きい）、<code>&lt;</code>（より小さい）、<code>&gt;=</code>（以上）、<code>&lt;=</code>（以下）</li>
                <li>論理演算子： <code>&&</code>（論理積、AND）、<code>||</code>（論理和、OR）、<code>!</code>（論理否定、NOT）</li>
            </ul>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code8')">コピー</button>
                </div>
                <pre><code id="code8" class="language-javascript">// 算術演算子
let sum = 10 + 5; // 15
let difference = 10 - 5; // 5
let product = 10 * 5; // 50
let quotient = 10 / 5; // 2
let remainder = 10 % 3; // 1 (10を3で割った余り)

// 比較演算子
let isEqual = (10 == 10); // true
let isStrictEqual = (10 === "10"); // false (型が異なるため)
let isNotEqual = (10 != 5); // true
let isGreaterThan = (10 &gt; 5); // true
let isLessThanEqual = (10 &lt;= 10); // true

// 論理演算子
let logicalAnd = (true && false); // false
let logicalOr = (true || false); // true
let logicalNot = !true; // false</code>
                </pre>
            </div>
        
            <h3>制御構文</h3>
            <p>
                JavaScriptでは、コードの実行を制御するために、条件分岐やループが使用されます。
            </p>
        
            <h4>条件分岐（if文）</h4>
            <p>
                条件分岐（if文）は、特定の条件が真（true）であるかどうかを確認し、条件に応じて異なるコードブロックを実行します。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code9')">コピー</button>
                </div>
                <pre><code id="code9" class="language-javascript">if (条件式) {
    // 条件が真の場合に実行されるコード
} else if (別の条件式) {
    // 別の条件が真の場合に実行されるコード
} else {
    // どの条件も満たさない場合に実行されるデフォルトのコード
}</code>
</pre>
            </div>

            
            <h4>ループ（forループ）</h4>
            <p>
                forループは特定の条件の間、コードブロックを繰り返し実行します。主に配列やオブジェクトの要素やプロパティに対して使用されます。
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>javascript</span>
                    <button class="copy-button" onclick="copyCode('code10')">コピー</button>
                </div>
                <pre><code id="code10" class="language-javascript">// 標準的なforループ
for (初期化式; 条件式; 更新式) {
    // 条件式が真の間、繰り返し実行されるコード
}

// for...ofループ（配列の各要素に対して使用）
for (要素 of 配列) {
    // 配列の各要素に対して繰り返し実行されるコード
}

// for...inループ（オブジェクトのプロパティに対して使用）
for (プロパティ in オブジェクト) {
    // オブジェクトのプロパティごとに繰り返し実行されるコード
}</code>
            </pre>
            </div>
        
            <h3>JavaScriptの関数の定義方法</h3>
        <p>
            JavaScriptでは、以下のように異なる方法で関数を定義することができます。それぞれの方法には特有の特徴があります。
        </p>
        
        <!-- 宣言関数の説明 -->
        <h4>1. 宣言関数（Function Declaration）</h4>
        <p>
            宣言関数は、<code>function</code> キーワードを使って定義します。関数名を指定し、その関数が必要とする引数を丸括弧の中に書きます。関数が実行されたときに行う処理は波括弧の中に書きます。
        </p>
        <div class="code-container">
            <div class="code-header">
                <span>javascript</span>
                <button class="copy-button" onclick="copyCode('code11')">コピー</button>
            </div>
            <pre><code id="code11" class="language-javascript">function 関数名(引数1, 引数2, ...) { // 関数が実行されたときに行う処理 } </code>
            </pre>
        </div>
        <pre><code>
</code></pre>
        
        
        <!-- 関数式の説明 -->
        <h4>2. 関数式（Function Expression）</h4>
        <p>
            関数式は、関数を変数に代入する形式で定義します。関数名は省略することもできます。関数が実行されたときに行う処理は波括弧の中に書きます。
        </p>
        <div class="code-container">
            <div class="code-header">
                <span>javascript</span>
                <button class="copy-button" onclick="copyCode('code12')">コピー</button>
            </div>
            <pre><code id="code12" class="language-javascript">
                const 変数名 = function(引数1, 引数2, ...) { // 関数が実行されたときに行う処理 };</code>
            </pre>
        </div>
        
        <!-- アロー関数の説明 -->
        <h4>3. アロー関数（Arrow Function）</h4>
        <p>
            アロー関数は、関数をより簡潔に定義するための方法です。<code>=></code> を使って関数を定義します。引数が1つの場合は丸括弧を省略できます。関数が実行されたときに行う処理は波括弧の中に書きます。
        </p>
        <div class="code-container">
            <div class="code-header">
                <span>javascript</span>
                <button class="copy-button" onclick="copyCode('code13')">コピー</button>
            </div>
            <pre><code id="code13" class="language-javascript">
            const 変数名 = (引数1, 引数2, ...) => { // 関数が実行されたときに行う処理 };</code>
            </pre>
        </div>

        </section>
        <section>
            <h2 id="3rd">ゲームの作り方</h2>
            <h3>ファイルの作成</h3>
            <p>
                今回はHTML、CSS、javascriptを使用するので3つのファイルを作成します。ファイル名はバグ防止のため同じものにしてください。
                <br>
                <ul>
                    <li>HTML用ファイル：index.html</li>
                    <li>javascript用ファイル：game.js</li>
                    <li>CSS用ファイル：style.css</li>
                </ul>
                これらのファイルを用意出来たら、index.htmlとstyle.cssにそれぞれ下記のコードを貼り付けます。今回はjavascriptの勉強が目的ですので、ここではHTML、CSSについての解説はしていません。気になる人は各自調べてみてください。
                <br>
            </p>
            <div class="code-container">
                <div class="code-header">
                    <span>index.html</span>
                    <button class="copy-button" onclick="copyCode('code14')">コピー</button>
                </div>
                <pre><code id="code14" class="language-javascript">
&lt;!DOCTYPE html&gt;
&lt;html lang="ja"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;迷路ゲーム&lt;/title&gt;
    &lt;link rel="stylesheet" href="style.css"&gt;
&lt;/head&gt;
&lt;body&gt;        
    &lt;div class="explain"&gt;
        &lt;h1&gt;迷路ゲーム&lt;/h1&gt;
        &lt;h2&gt;ルール説明&lt;/h2&gt;
        &lt;p&gt;左上のキャラクターを使って、なるべく早く迷路内の落し物持ち主に届けて、1番左上のマスに戻ってくるタイムを競うゲームである。&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;荷物は一度に一つしか持てません。&lt;/li&gt;
            &lt;li&gt;黄色い場所が地面で緑の場所が壁（障害物）です。&lt;/li&gt;
            &lt;li&gt;荷物を渡すときは、正しい持ち主の周りのマスを踏むと渡せるようになっています。&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    &lt;div id="container"&gt;
        &lt;div id="maze-container"&gt;&lt;/div&gt;
        &lt;div id="log-container"&gt;ここにはゲームのログが表示されるよ！&lt;/div&gt;
    &lt;/div&gt;

    &lt;script src="game.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;                    
                    </code>
                </pre>
            </div>
            
            <br>
            
            <div class="code-container">
                <div class="code-header">
                    <span>style.css</span>
                    <button class="copy-button" onclick="copyCode('code15')">コピー</button>
                </div>
                <pre><code id="code15" class="language-javascript">
body {
    display: flex;
    flex-direction: column;
    padding-left: 5%;
}

.explain{
    padding-right: 45%;
}

#maze-container {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(20, 30px);
    grid-template-rows: repeat(11, 30px);
    gap: 2px;
}

.cell {
    width: 30px;
    height: 30px;
    border: 1px solid #ddd;
    display: flex;
    align-items: center;
    justify-content: center;
    background-size: cover;
    background-position: center;
}

#container {
    display: flex;
}

.player {
    background-color: #0f0;
    background-image: url('player.gif');
}

.player-left {
    background-image: url('player-left.gif');
}

.player-right {
    background-image: url('player-right.gif');
}

.customer {
    background-color: #00f;
}

.package {
    background-color: #f00;
}

.wall {
    background-color: #006036;
}

.path {
    background-color: #D0A900;
}

@import url('https://fonts.googleapis.com/css2?family=DotGothic16&display=swap');

#log-container {
    flex: 1;
    margin-top: 20px;
    margin-left: 20px;
    border: 5px solid rgb(0, 117, 226);
    padding: 10px;
    width: 300px;
    height: 250px;
    overflow-y: auto;
    background-color: #000;
    color: #ddd;
    font-family: "DotGothic16", sans-serif;
    font-weight: 400;
    font-style: normal;
}

.car {
    background-image: url('car.png');
    background-size: cover;
}                    
        </code>
                </pre>
            </div>
            <h3>画像の保存</h3>
            <p>
                次にゲームで使用する画像を保存してきます。このゲームで使用するのは4人分のキャラクターと3人分の荷物のイラストです。今回イラストは<a href="https://hpgpixer.jp/#google_vignette">こちら</a>のサイト様でお借りしました。
                <ul>
                        <li>プレイヤーのキャラクター</li>
                        <li>配達先のキャラクターA</li>
                        <li>配達先のキャラクターB</li>
                        <li>配達先のキャラクターC</li>
                        <li>配達物A</li>
                        <li>配達物B</li>
                        <li>配達物C</li>
                </ul>
            </p>
            <h3> HTML&CSSファイルの設定</h3>
            <h3>変数の設定</h3>
            <h3>関数の設定</h3>
            <h3>実行処理</h3>
            <div class="code-container">
                <div class="code-header">
                    <span>JavaScript</span>
                    <button class="copy-button" onclick="copyCode('code1111')">コピー</button>
                </div>
                <pre><code id="code1111" class="language-javascript">function checkForCompletion() {
            if (player.x === startPosition.x && player.y === startPosition.y) {
                if (deliveredPackages === customers.length) {
                    const endTime = new Date();
                    const timeTaken = (endTime - startTime) / 1000;
                    logMessage(`ゲームクリア！かかった時間: ${timeTaken}秒`);
                } else {
                    logMessage('まだ荷物を運びきれていないよ！！');
                }
            }
        }</code></pre>
            </div>

            <!-- <div class="code-container">
                <div class="code-header">
                    <span>言語</span>
                    <button class="copy-button" onclick="copyCode('code')">コピー</button>
                </div>
                <pre><code id="code" class="language-javascript">

                    </code>
                </pre>
            </div> -->
        </section>
        <script src="script.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/components/prism-javascript.min.js"></script>
    </body> 
</html>